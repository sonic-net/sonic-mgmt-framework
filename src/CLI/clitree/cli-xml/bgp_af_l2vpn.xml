<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright 2019 Dell, Inc.  

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--> 

<CLISH_MODULE
    xmlns="http://www.dellemc.com/sonic/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema
                        http://www.dellemc.com/sonic/XMLSchema/clish.xsd"
    >
    <!--=======================================================-->

<VIEW name="configure-router-bgp-l2vpn-view" prompt="${SYSTEM_NAME}(config-router-bgp-af)# " depth="3">
  <NAMESPACE ref="configure-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-view" help="false" completion="false" />
  <COMMAND name="redistribute" help="Redistribute information from another routing protocol">
    <PARAM name="protocol" help="protocol" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="connected" help="Connected Routes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="static" help="Static Routes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="ospf" help="Open Shortest Path First (OSPFv2)" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <PARAM name="route-map" help="Route-map reference" mode="subcommand" ptype="SUBCOMMAND" optional="true">
      <PARAM name="route-map-name" help="Route map name" ptype="STRING"/>
    </PARAM>
    <PARAM name="metric" help="Metric for redistributed routes" mode="subcommand" ptype="SUBCOMMAND" optional="true">
      <PARAM name="metvalue" help="Default metric" ptype="RANGE_0_4294967295"/>
    </PARAM>
    <ACTION> if test -n "${route-map-name}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_network_instance_network_instances_network_instance_table_connections_table_connection_config_import_policy ${vrf-name} L2VPN_EVPN ${protocol} ${route-map-name}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_network_instance_network_instances_network_instance_table_connections_table_connection_config ${vrf-name} L2VPN_EVPN ${protocol}&#xA;
             fi&#xA;
             if test -n "${metric}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_network_instance_ext_network_instances_network_instance_table_connections_table_connection_config_metric ${vrf-name} L2VPN_EVPN ${protocol} ${metvalue}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
    <COMMAND name="maximum-paths" help="Forward packets over multiple paths">
      <PARAM name="paths" help="Number of paths" ptype="RANGE_1_256"/>
      <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_network_instance1348121867 ${vrf-name} L2VPN_EVPN ${paths}</ACTION>
    </COMMAND>
    <COMMAND name="maximum-paths ibgp" help="iBGP-multipath">
       <PARAM name="ipaths" help="Number of paths" ptype="RANGE_1_256">
         <PARAM name="equal-cluster-length" help="Match the cluster length" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
       </PARAM>
       <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_network_instance1543452951 ${vrf-name} L2VPN_EVPN ${ipaths}&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext3691744053 ${vrf-name} L2VPN_EVPN ${equal-cluster-length}&#xA;
       </ACTION>
    </COMMAND>
  <COMMAND name="network" help="Enable routing on an IP network">
    <PARAM name="prefix" help="Network number" ptype="IP_ADDR_MASK">
      <PARAM name="backdoor" help="Backdoor" ptype="SUBCOMMAND" mode="subcommand" default="x" optional="true"/>
      <PARAM name="route-map" help="Route-map reference" mode="subcommand" ptype="SUBCOMMAND" optional="true">
        <PARAM name="route-map-name" help="Route map name" ptype="STRING"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_network_config_network_config ${vrf-name} L2VPN_EVPN ${prefix} ${backdoor} ${route-map-name}&#xA;
             if test "${backdoor}" = "x" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_network_config_network_config_backdoor ${vrf-name} L2VPN_EVPN ${prefix}&#xA;
             fi&#xA;
             if test -z "${route-map}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_network_config_network_config_policy_name ${vrf-name} L2VPN_EVPN ${prefix}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="table-map" help="BGP table to RIB route download filter">
    <PARAM name="rtmap" help="Router map name" ptype="STRING"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_config_table_map_name ${vrf-name} L2VPN_EVPN ${rtmap}</ACTION>
  </COMMAND>
  <COMMAND name="aggregate-address" help="Configure BGP aggregate entries">
    <PARAM name="prefix" help="Aggregate prefix" ptype="IP_ADDR_MASK">
      <PARAM name="as-set" help="Generate AS set path information" ptype="SUBCOMMAND" mode="subcommand" optional="true"/>
      <PARAM name="summary-only" help="Filter more specific routes from updates" ptype="SUBCOMMAND" mode="subcommand" optional="true"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_aggregate_address_config_aggregate_address_config ${vrf-name} L2VPN_EVPN ${prefix} ${as-set} ${summary-only}&#xA;
             if test -z "${as-set}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_aggregate_address_config_aggregate_address_config_as_set ${vrf-name} L2VPN_EVPN ${prefix}&#xA;
             fi&#xA;
             if test -z "${summary-only}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_aggregate_address_config_aggregate_address_config_summary_only ${vrf-name} L2VPN_EVPN ${prefix}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="distance" help="Define an administrative distance"/>
  <COMMAND name="distance bgp" help="Define an administrative distance">
    <PARAM name="external" help="Distance for routes external to the AS" ptype="RANGE_1_255">
      <PARAM name="internal" help="Distance for routes internal to the AS" ptype="RANGE_1_255">
        <PARAM name="local" help="Distance for local routes" ptype="RANGE_1_255"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_default_route_distance_config ${vrf-name} L2VPN_EVPN ${external} ${internal} ${local}</ACTION>
  </COMMAND>

  <COMMAND name="no" help="no commands"/>
  <COMMAND name="no redistribute" help="Redistribute information from another routing protocol">
    <PARAM name="protocol" help="protocol" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="connected" help="Connected Routes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="static" help="Static Routes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="ospf" help="Open Shortest Path First (OSPFv2)" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <PARAM name="route-map" help="Route-map reference" mode="subcommand" ptype="SUBCOMMAND" optional="true">
      <PARAM name="route-map-name" help="Route map name" ptype="STRING"/>
    </PARAM>
    <PARAM name="metric" help="Metric for redistributed routes" mode="subcommand" ptype="SUBCOMMAND" optional="true">
      <PARAM name="metvalue" help="Default metric" ptype="RANGE_0_4294967295"/>
    </PARAM>
    <ACTION> if test -n "${route-map-name}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_network_instance_network_instances_network_instance_table_connections_table_connection_config_import_policy ${vrf-name} L2VPN_EVPN ${protocol} ${route-map-name}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_network_instance_network_instances_network_instance_table_connections_table_connection ${vrf-name} L2VPN_EVPN ${protocol}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
    <COMMAND name="no maximum-paths" help="Forward packets over multiple paths">
      <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_network_instance1348121867 ${vrf-name} L2VPN_EVPN ${paths}</ACTION>
    </COMMAND>
    <COMMAND name="no maximum-paths ibgp" help="iBGP-multipath">
       <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_network_instance1543452951 ${vrf-name} L2VPN_EVPN ${ipaths}&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext3691744053 ${vrf-name} L2VPN_EVPN&#xA;
       </ACTION>
    </COMMAND>
  <COMMAND name="no network" help="Enable routing on an IP network">
    <PARAM name="prefix" help="Network number" ptype="IP_ADDR_MASK">
      <PARAM name="backdoor" help="Backdoor" ptype="SUBCOMMAND" mode="subcommand" optional="true"/>
      <PARAM name="route-map" help="Route-map reference" mode="subcommand" ptype="SUBCOMMAND" optional="true">
        <PARAM name="route-map-name" help="Route map name" ptype="STRING"/>
      </PARAM>
    </PARAM>
    <ACTION> if test -z "${backdoor}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_network_config_network_config_backdoor ${vrf-name} L2VPN_EVPN ${prefix}&#xA;
             fi&#xA;
             if test -n "${route-map}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_network_config_network_config_policy_name ${vrf-name} L2VPN_EVPN ${prefix}&#xA;
             elif test -z "${backdoor}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_network_config_network ${vrf-name} L2VPN_EVPN ${prefix}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no table-map" help="BGP table to RIB route download filter">
    <PARAM name="rtmap" help="Number of paths" ptype="STRING" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_config_table_map_name ${vrf-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no aggregate-address" help="Configure BGP aggregate entries">
    <PARAM name="prefix" help="Aggregate prefix" ptype="IP_ADDR_MASK">
      <PARAM name="as-set" help="Generate AS set path information" ptype="SUBCOMMAND" optional="true">
        <PARAM name="summary-only" help="Filter more specific routes from updates" ptype="SUBCOMMAND" optional="true"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_aggregate_address_config_aggregate_address ${vrf-name} L2VPN_EVPN ${prefix}&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no distance" help="Define an administrative distance"/>
  <COMMAND name="no distance bgp" help="Define an administrative distance">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_default_route_distance_config_external_route_distance ${vrf-name} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_default_route_distance_config_internal_route_distance ${vrf-name} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_default_route_distance_config_local_route_distance ${vrf-name} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>

  <COMMAND name="advertise-all-vni" help="Advertise all local VNIs">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_advertise_all_vni ${vrf-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="advertise-default-gw" help="Advertise all default gw mac-ip routes in EVPN">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_advertise_default_gw ${vrf-name} L2VPN_EVPN True</ACTION>
  </COMMAND>

  <COMMAND name="advertise" help="Advertise prefix routes"/>
  <COMMAND name="advertise ipv4" help="Address family IPv4"/>
  <COMMAND name="advertise ipv4 unicast" help="SAFI unicast">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_advertise ${vrf-name} L2VPN_EVPN IPV4_UNICAST</ACTION>
  </COMMAND>

  <COMMAND name="advertise ipv6" help="Address family IPv6"/>
  <COMMAND name="advertise ipv6 unicast" help="SAFI unicast">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_advertise ${vrf-name} L2VPN_EVPN IPV6_UNICAST</ACTION>
  </COMMAND>

  <COMMAND name="default-originate" help="originate a default route"/>
  <COMMAND name="default-originate ipv4" help="Address family IPv4">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_default_originate ${vrf-name} L2VPN_EVPN ipv4</ACTION>
  </COMMAND>
  <COMMAND name="default-originate ipv6" help="Address family IPv6">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_default_originate ${vrf-name} L2VPN_EVPN ipv6</ACTION>
  </COMMAND>

  <COMMAND name="autort" help="Auto-derivation of RT">
    <PARAM name="rfc8365-compatible" mode="subcommand" ptype="SUBCOMMAND" help="Auto-derivation of RT using RFC8365">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_autort ${vrf-name} L2VPN_EVPN rfc8365-compatible</ACTION>
  </COMMAND>

  <COMMAND name="flooding" help="Specify handling for BUM packets">
    <PARAM name="flooding-type" help="flooding options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="disable" help="Do not flood any BUM packets" mode="subcommand" ptype="SUBCOMMAND">
      </PARAM>
      <PARAM name="head-end-replication" help="Flood BUM packets using head-end replication" mode="subcommand" ptype="SUBCOMMAND">
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_flooding ${vrf-name} L2VPN_EVPN ${flooding-type}</ACTION>
  </COMMAND>

  <COMMAND name="rd" help="Route distinguisher" >
    <!--PARAM name="rdvalue" help="Route Distinguisher value" ptype="RD"/-->
    <PARAM name="rdvalue" help="Route Distinguisher value" ptype="STRING"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_rd ${vrf-name} L2VPN_EVPN ${rdvalue}</ACTION>
  </COMMAND>

  <COMMAND name="route-target" help="Route target">
    <PARAM name="rttype" help="advertise options" ptype="ADVERTISE_OPTIONS">
      <!--PARAM name="rt" help="Route target value" ptype="RT"/-->
      <PARAM name="rt" help="Route target value" ptype="STRING"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_rt ${vrf-name} L2VPN_EVPN ${rt} ${rttype}</ACTION>
  </COMMAND>

  <COMMAND name="dup-addr-detection" help="Duplicate address detection" >
    <PARAM name="max-moves" help="Max allowed moves before address detected as duplicate" optional="true" mode="subcommand" ptype="SUBCOMMAND">
      <PARAM name="nummoves" help="Number of max allowed moves (2-1000) default 5" ptype="DAD_MAX_MOVES">
        <PARAM name="time" help="Duplicate address detection time" mode="subcommand" ptype="SUBCOMMAND">
          <PARAM name="timevalue" help="Time in seconds" ptype="DAD_TIME">
          </PARAM>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> 
      if test "${nummoves}" = "" -a "${timevalue}" = ""; then&#xA;
        python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_dad_enable ${vrf-name} L2VPN_EVPN&#xA;
      else&#xA;
        python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_dad_params ${vrf-name} L2VPN_EVPN ${nummoves} ${timevalue}&#xA;
      fi&#xA;
    </ACTION>
  </COMMAND>

  <COMMAND name="dup-addr-detection freeze" help="Duplicate address detection freeze">
    <PARAM name="freezetype" help="freeze options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="permanent" help="Permanent freeze" mode="subcommand" ptype="SUBCOMMAND">
      </PARAM>
      <PARAM name="time" help="" ptype="DAD_FREEZE_TIME">
      </PARAM>
    </PARAM>
    <ACTION> 
      if test "${freezetype}" = "permanent"; then&#xA;
        python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_dad_freeze ${vrf-name} L2VPN_EVPN permanent&#xA;
      else&#xA;
        python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_dad_freeze ${vrf-name} L2VPN_EVPN ${time}&#xA;
      fi&#xA;
    </ACTION> 
  </COMMAND>

  <COMMAND name="vni" help="Enter VNI config mode" view="configure-router-bgp-l2vpn-vni-view" viewid="vrf-name=${vrf-name};family=l2vpn;vninum=${vninum}">
    <PARAM name="vninum" help="VxLAN Network Identifier" ptype="VNI_RANGE" view="configure-router-bgp-l2vpn-vni-view" viewid="vrf-name=${vrf-name};family=l2vpn;vninum=${vninum}"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py patch_bgp_evpn_vni ${vrf-name} L2VPN_EVPN ${vninum}</ACTION>
  </COMMAND>


  <COMMAND name="no advertise-all-vni" help="Advertise all local VNIs">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_advertise_all_vni ${vrf-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="no advertise-default-gw" help="Advertise all default gw mac-ip routes in EVPN">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_advertise_default_gw ${vrf-name} L2VPN_EVPN True</ACTION>
  </COMMAND>

  <COMMAND name="no advertise" help="Advertise prefix routes"/>
  <COMMAND name="no advertise ipv4" help="Address family IPv4"/>
  <COMMAND name="no advertise ipv4 unicast" help="SAFI unicast">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_advertise ${vrf-name} L2VPN_EVPN IPV4_UNICAST</ACTION>
  </COMMAND>

  <COMMAND name="no advertise ipv6" help="Address family IPv6"/>
  <COMMAND name="no advertise ipv6 unicast" help="SAFI unicast">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_advertise ${vrf-name} L2VPN_EVPN IPV6_UNICAST</ACTION>
  </COMMAND>

  <COMMAND name="no default-originate" help="originate a default route"/>
  <COMMAND name="no default-originate ipv4" help="Address family IPv4">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_default_originate ${vrf-name} L2VPN_EVPN ipv4</ACTION>
  </COMMAND>
  <COMMAND name="no default-originate ipv6" help="Address family IPv6">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_default_originate ${vrf-name} L2VPN_EVPN ipv6</ACTION>
  </COMMAND>

  <COMMAND name="no autort" help="Auto-derivation of RT">
    <PARAM name="rfc8365-compatible" mode="subcommand" ptype="SUBCOMMAND" help="Auto-derivation of RT using RFC8365">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_autort ${vrf-name} L2VPN_EVPN rfc8365-compatible</ACTION>
  </COMMAND>

  <COMMAND name="no flooding" help="Specify handling for BUM packets">
    <PARAM name="flooding-type" help="flooding options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="disable" help="Do not flood any BUM packets" mode="subcommand" ptype="SUBCOMMAND">
      </PARAM>
      <PARAM name="head-end-replication" help="Flood BUM packets using head-end replication" mode="subcommand" ptype="SUBCOMMAND">
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_flooding ${vrf-name} L2VPN_EVPN ${flooding-type}</ACTION>
  </COMMAND>

  <COMMAND name="no rd" help="Route distinguisher" >
    <!--PARAM name="rdvalue" help="Route Distinguisher value" ptype="RD"/-->
    <PARAM name="rdvalue" help="Route Distinguisher value" ptype="STRING"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_rd ${vrf-name} L2VPN_EVPN ${rdvalue}</ACTION>
  </COMMAND>

  <COMMAND name="no route-target" help="Route target">
    <PARAM name="rttype" help="advertise options" ptype="ADVERTISE_OPTIONS">
      <!--PARAM name="rt" help="Route target value" ptype="RT"/-->
      <PARAM name="rt" help="Route target value" ptype="STRING"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_rt ${vrf-name} L2VPN_EVPN ${rt} ${rttype}</ACTION>
  </COMMAND>

  <COMMAND name="no dup-addr-detection" help="Duplicate address detection" >
    <PARAM name="max-moves" help="Max allowed moves before address detected as duplicate" optional="true" mode="subcommand" ptype="SUBCOMMAND">
      <PARAM name="nummoves" help="Number of max allowed moves (2-1000) default 5" ptype="DAD_MAX_MOVES">
        <PARAM name="time" help="Duplicate address detection time" mode="subcommand" ptype="SUBCOMMAND">
          <PARAM name="timevalue" help="Time in seconds" ptype="DAD_TIME">
          </PARAM>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> 
      if test "${nummoves}" = "" -a "${timevalue}" = ""; then&#xA;
        python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_dad_enable ${vrf-name} L2VPN_EVPN&#xA;
      else&#xA;
        python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_dad_params ${vrf-name} L2VPN_EVPN ${nummoves} ${timevalue}&#xA;
      fi&#xA;
    </ACTION>
  </COMMAND>

  <COMMAND name="no dup-addr-detection freeze" help="Duplicate address detection freeze">
    <PARAM name="freezetype" help="freeze options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="permanent" help="Permanent freeze" mode="subcommand" ptype="SUBCOMMAND">
      </PARAM>
      <PARAM name="time" help="" ptype="DAD_FREEZE_TIME">
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_dad_freeze ${vrf-name} L2VPN_EVPN</ACTION>
  </COMMAND>

  <COMMAND name="no vni" help="Enter VNI config mode" >
    <PARAM name="vninum" help="VxLAN Network Identifier" ptype="VNI_RANGE"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp-evpn.py delete_bgp_evpn_vni ${vrf-name} L2VPN_EVPN ${vninum}</ACTION>
  </COMMAND>

</VIEW>

<VIEW name="configure-router-bgp-nbr-l2vpn-view" prompt="${SYSTEM_NAME}(config-router-bgp-neighbor-af)# " depth="4">
  <NAMESPACE ref="configure-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-nbr-view" help="false" completion="false" />
  <COMMAND name="activate" help="Enable the Address Family for this Neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="allowas-in" help="Allow local AS number in as-path">
    <PARAM name="allowopt" help="" mode="switch" ptype="SUBCOMMAND" optional="true">
      <PARAM name="value" help="as-number" ptype="RANGE_1_10"/>
      <PARAM name="origin" help="Only accept my AS in the as-path if the route was originated in my AS" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> if test -n "${value}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${nbr-addr} L2VPN_EVPN ${value}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${nbr-addr} L2VPN_EVPN ${value}&#xA;
             fi&#xA;
             if test -n "${origin}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${nbr-addr} L2VPN_EVPN True&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${nbr-addr} L2VPN_EVPN False&#xA;
             fi&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN True&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="route-map" help="Name of the route map (max 140 chars)">
    <PARAM name="route-name-str" help="route map name" ptype="STRING">
      <PARAM name="direction" help="direction" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routing updates" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routing updates" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION>
          if test "${direction}" = "in" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          else&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          fi&#xA;
    </ACTION>
  </COMMAND>

  <COMMAND name="addpath-tx-all-paths" help="Use addpath to advertise all paths to a neighbor">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_add_paths_config_tx_add_paths ${vrf-name} ${nbr-addr} L2VPN_EVPN TX_ALL_PATHS</ACTION>
  </COMMAND>
  <COMMAND name="addpath-tx-bestpath-per-AS" help="Use addpath to advertise the bestpath per each neighboring AS">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_add_paths_config_tx_add_paths ${vrf-name} ${nbr-addr} L2VPN_EVPN TX_BEST_PATH_PER_AS</ACTION>
  </COMMAND>
  <COMMAND name="as-override" help="Override ASNs in outbound updates if aspath equals remote-as">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_as_override ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="attribute-unchanged" help="BGP attribute is propagated unchanged to this neighbor">
    <PARAM name="as-path" help="As-path attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <PARAM name="med" help="Med attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <PARAM name="next-hop" help="Nexthop attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <ACTION> if test -z "${as-path}${med}${next-hop}" -o "${as-path}${med}${next-hop}" = "as-pathmednext-hop"; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_attribute_unchanged_config ${vrf-name} ${nbr-addr} L2VPN_EVPN as-path med next-hop&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_attribute_unchanged_config ${vrf-name} ${nbr-addr} L2VPN_EVPN ${as-path} ${med} ${next-hop}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="capability" help="_Advertise capability to the peer"/>
  <COMMAND name="capability orf" help="Advertise ORF capability to the peer"/>
  <COMMAND name="capability orf prefix-list" help="Advertise prefixlist ORF capability to this neighbor">
    <PARAM name="capopt" help="Capabilities" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="send" help="Capability to RECEIVE the ORF from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="receive" help="Capability to SEND the ORF to this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Capability to SEND and RECEIVE the ORF to/from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_capability_orf_config_orf_type ${vrf-name} ${nbr-addr} L2VPN_EVPN ${capopt}</ACTION>
  </COMMAND>
  <COMMAND name="default-originate" help="Originate default route to this neighbor" ref="hidden">
    <PARAM name="route-map" help="Route-map to specify criteria to originate default" mode="subcommand" ptype="SUBCOMMAND" optional="true">
       <PARAM name="rtemap" help="Route-map name" ptype="STRING"/>
    </PARAM>
    <ACTION>
             if test -n "${route-map}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_send_default_route ${vrf-name} ${nbr-addr} L2VPN_EVPN True&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_default_policy_name ${vrf-name} ${nbr-addr} L2VPN_EVPN ${rtemap}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_send_default_route ${vrf-name} ${nbr-addr} L2VPN_EVPN True&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="filter-list" help="Establish BGP filters">
    <PARAM name="fname" help="AS path access-list name" ptype="STRING">
      <PARAM name="filtopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> if test "${filtopt}" = "in" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_filter_list_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${fname}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_filter_list_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${fname}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="next-hop-self" help="Disable the next hop calculation for this neighbor">
    <PARAM name="force" help="Set the next hop to self for reflected routes" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_next_hop_self_config ${vrf-name} ${nbr-addr} L2VPN_EVPN True ${force}&#xA;
             if test -z "${force}" ; then&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_next_hop_self_config_force ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             fi&#xA;
     </ACTION>
  </COMMAND>
  <COMMAND name="prefix-list" help="Filter updates to/from this neighbor">
    <PARAM name="pname" help="Name of a prefix list" ptype="STRING">
      <PARAM name="prfopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> if test "${prfopt}" = "in" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_prefix_list_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${pname}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_prefix_list_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${pname}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="remove-private-AS" help="Remove private ASNs in outbound updates">
    <PARAM name="all" help="Apply to all AS numbers" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <PARAM name="replace-AS" help="Replace private ASNs with our ASN in outbound updates" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_remove_private_as_config ${vrf-name} ${nbr-addr} L2VPN_EVPN True ${all} ${replace-AS}&#xA;
             if test -z "${all}" ; then&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_remove_private_as_config_all ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             fi&#xA;
             if test -z "${replace-AS}" ; then&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_remove_private_as_config_replace_as ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="route-reflector-client" help="Configure a neighbor as Route Reflector client">
   <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_route_reflector_client ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="route-server-client" help="Configure a neighbor as Route Server client">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_route_server_client ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="send-community" help="Send Community attribute to this neighbor">
    <PARAM name="comtype" help="Send options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="standard" help="Send Standard Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="extended" help="Send Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Send Standard and Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="none" help="Do not send Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_send_community ${vrf-name} ${nbr-addr} L2VPN_EVPN ${comtype}</ACTION>
  </COMMAND>
  <COMMAND name="soft-reconfiguration" help="Per neighbor soft reconfiguration">
    <PARAM name="inbound" help="Allow inbound soft reconfiguration for this neighbor" mode="subcommand" ptype="SUBCOMMAND">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_soft_reconfiguration_in ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="unsuppress-map" help="Route-map to selectively unsuppress suppressed routes">
    <PARAM name="map" help="Name of route map" ptype="STRING">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_unsuppress_map_name ${vrf-name} ${nbr-addr} L2VPN_EVPN ${map}</ACTION>
  </COMMAND>
  <COMMAND name="weight" help="Set default weight for routes from this neighbor">
    <PARAM name="val" help="Default weight" ptype="RANGE_0_65535"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_weight ${vrf-name} ${nbr-addr} L2VPN_EVPN ${val}</ACTION>
  </COMMAND>
  <COMMAND name="maximum-prefix" help="Maximum number of prefixes to accept from this peer">
    <PARAM name="max-prefix-val" help="Maximum no. of prefix limit" ptype="RANGE_1_4294967295">
      <PARAM name="threshold-val" help="Threshold value (%) at which to generate a warning msg" ptype="PERCENT_1" default="0" order="true" optional="true"/>
      <PARAM name="maxpfopt" help="Maximum limit options" mode="switch" ptype="SUBCOMMAND" order="true" optional="true">
        <PARAM name="warning-only" help="Only give warning message when limit is exceeded" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="restart" help="Restart bgp connection after limit is exceeded" mode="subcommand" ptype="SUBCOMMAND">
           <PARAM name="interval" help="Restart interval in minutes" ptype="RANGE_1_65535"/>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config ${vrf-name} ${nbr-addr} L2VPN_EVPN ${max-prefix-val} ${threshold-val} ${maxpfopt} ${interval}&#xA;
             if test "${threshold-val}" = "0" ; then&#xA;
                  python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_warning_threshold_pct ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             fi&#xA;
             if test -z "${warning-only}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_prevent_teardown ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             fi&#xA;
             if test -z "${restart}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_restart_timer ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>

  <COMMAND name="no" help="no commands"/>
  <COMMAND name="no activate" help="Disable the Address Family for this Neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN False</ACTION>
  </COMMAND>
  <COMMAND name="no allowas-in" help="Allow local AS number in as-path">
    <PARAM name="allowopt" help="" mode="switch" ptype="SUBCOMMAND" optional="true">
      <PARAM name="value" help="as-number" ptype="RANGE_1_10"/>
      <PARAM name="origin" help="Only accept my AS in the as-path if the route was originated in my AS" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${nbr-addr} L2VPN_EVPN ${value}&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN False&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no route-map" help="Name of the route map (max 140 chars)">
    <PARAM name="route-name-str" help="route map name" ptype="STRING">
      <PARAM name="direction" help="direction" mode="switch" ptype="SUBCOMMAND" optional="true">
        <PARAM name="in" help="Filter incoming routing updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
        <PARAM name="out" help="Filter outgoing routing updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
      </PARAM>
    </PARAM>
    <ACTION>
          if test "${direction}" = "in" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          elif test "${direction}" = "out" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          else&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no addpath-tx-all-paths" help="Use addpath to advertise all paths to a neighbor">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_add_paths_config_tx_add_paths ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no addpath-tx-bestpath-per-AS" help="Use addpath to advertise the bestpath per each neighboring AS">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_add_paths_config_tx_add_paths ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no as-override" help="Override ASNs in outbound updates if aspath equals remote-as">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_as_override ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no attribute-unchanged" help="BGP attribute is propagated unchanged to this neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_attribute_unchanged_config_as_path ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_attribute_unchanged_config_med ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_attribute_unchanged_config_next_hop ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no capability" help="Advertise capability to the peer"/>
  <COMMAND name="no capability orf" help="Advertise capability to this neighbor"/>
  <COMMAND name="no capability orf prefix-list" help="Advertise capability to this neighbor">
    <PARAM name="capopt" help="Capabilities" mode="switch" ptype="SUBCOMMAND" optional="true">
      <PARAM name="send" help="Capability to RECEIVE the ORF from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="receive" help="Capability to SEND the ORF to this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Capability to SEND and RECEIVE the ORF to/from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_capability_orf_config_orf_type ${vrf-name} ${nbr-addr} L2VPN_EVPN ${capopt}</ACTION>
  </COMMAND>
  <COMMAND name="no default-originate" help="Originate default route to this neighbor" ref="hidden">
    <PARAM name="route-map" help="Route-map to specify criteria to originate default" mode="subcommand" ptype="SUBCOMMAND" optional="true">
       <PARAM name="rtemap" help="Route-map name" ptype="STRING"/>
    </PARAM>
    <ACTION>
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_send_default_route ${vrf-name} ${nbr-addr} L2VPN_EVPN False&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_default_policy_name ${vrf-name} ${nbr-addr} L2VPN_EVPN ${rtemap}&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no filter-list" help="Establish BGP filters">
    <PARAM name="fname" help="AS path access-list name" ptype="STRING">
      <PARAM name="filtopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> if test "${filtopt}" = "in" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_filter_list_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${fname}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_filter_list_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${fname}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no next-hop-self" help="Disable the next hop calculation for this neighbor">
    <PARAM name="force" help="Set the next hop to self for reflected routes" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_next_hop_self_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
              python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_next_hop_self_config_force ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
     </ACTION>
  </COMMAND>
  <COMMAND name="no prefix-list" help="Filter updates to/from this neighbor">
    <PARAM name="pname" help="Name of a prefix list" ptype="STRING">
      <PARAM name="prfopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> if test "${prfopt}" = "in" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_prefix_list_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${pname}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_prefix_list_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${pname}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no remove-private-AS" help="Remove private ASNs in outbound updates">
    <PARAM name="all" help="Apply to all AS numbers" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <PARAM name="replace-AS" help="Replace private ASNs with our ASN in outbound updates" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_remove_private_as_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_remove_private_as_config_all ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_remove_private_as_config_replace_as ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no route-reflector-client" help="Configure a neighbor as Route Reflector client">
   <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_route_reflector_client ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no route-server-client" help="Configure a neighbor as Route Server client">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_route_server_client ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no send-community" help="Send Community attribute to this neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_send_community ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no soft-reconfiguration" help="Per neighbor soft reconfiguration">
    <PARAM name="inbound" help="Allow inbound soft reconfiguration for this neighbor" mode="subcommand" ptype="SUBCOMMAND">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_soft_reconfiguration_in ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no unsuppress-map" help="Route-map to selectively unsuppress suppressed routes">
    <PARAM name="map" help="Name of route map" ptype="STRING">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_unsuppress_map_name ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no weight" help="Set default weight for routes from this neighbor">
    <PARAM name="val" help="Default weight" ptype="RANGE_0_65535" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_weight ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no maximum-prefix" help="Maximum number of prefixes to accept from this peer">
    <PARAM name="max-prefix-val" help="Maximum no. of prefix limit" ptype="RANGE_1_4294967295" optional="true">
      <PARAM name="mxopt" help="Maximum limit options" mode="switch" ptype="SUBCOMMAND" optional="true">
        <PARAM name="threshold-val" help="Threshold value (%) at which to generate a warning msg" mode="subcommand" ptype="PERCENT_1"/>
        <PARAM name="warning-only" help="Only give warning message when limit is exceeded" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="restart" help="Restart bgp connection after limit is exceeded" mode="subcommand" ptype="SUBCOMMAND">
           <PARAM name="val" help="tbd" ptype="RANGE_1_255"/>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_max_prefixes ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_warning_threshold_pct ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_prevent_teardown ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_restart_timer ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>
</VIEW>

<VIEW name="configure-router-bgp-template-l2vpn-view" prompt="${SYSTEM_NAME}(config-router-bgp-pg-af)# " depth="4">
  <NAMESPACE ref="configure-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-template-view" help="false" completion="false" />
  <COMMAND name="activate" help="Enable the Address Family for this Neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="allowas-in" help="Allow local AS number in as-path">
    <PARAM name="allowopt" help="" mode="switch" ptype="SUBCOMMAND" optional="true">
      <PARAM name="value" help="as-number" ptype="RANGE_1_10"/>
      <PARAM name="origin" help="Only accept my AS in the as-path if the route was originated in my AS" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> if test -n "${value}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${template-name} L2VPN_EVPN ${value}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${template-name} L2VPN_EVPN ${value}&#xA;
             fi&#xA;
             if test -n "${origin}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${template-name} L2VPN_EVPN True&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${template-name} L2VPN_EVPN False&#xA;
             fi&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN True&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="route-map" help="Name of the route map (max 140 chars)">
    <PARAM name="route-name-str" help="route map name" ptype="STRING">
      <PARAM name="direction" help="direction" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routing updates" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routing updates" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION>
          if test "${direction}" = "in" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          else&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          fi&#xA;
    </ACTION>
  </COMMAND>

  <COMMAND name="addpath-tx-all-paths" help="Use addpath to advertise all paths to a neighbor">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_add_paths_config_tx_add_paths ${vrf-name} ${template-name} L2VPN_EVPN TX_ALL_PATHS</ACTION>
  </COMMAND>
  <COMMAND name="addpath-tx-bestpath-per-AS" help="Use addpath to advertise the bestpath per each neighboring AS">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_add_paths_config_tx_add_paths ${vrf-name} ${template-name} L2VPN_EVPN TX_BEST_PATH_PER_AS</ACTION>
  </COMMAND>
  <COMMAND name="as-override" help="Override ASNs in outbound updates if aspath equals remote-as">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_as_override ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="attribute-unchanged" help="BGP attribute is propagated unchanged to this neighbor">
    <PARAM name="as-path" help="As-path attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <PARAM name="med" help="Med attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <PARAM name="next-hop" help="Nexthop attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <ACTION> if test -z "${as-path}${med}${next-hop}" -o "${as-path}${med}${next-hop}" = "as-pathmednext-hop"; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_attribute_unchanged_config ${vrf-name} ${template-name} L2VPN_EVPN as-path med next-hop&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_attribute_unchanged_config ${vrf-name} ${template-name} L2VPN_EVPN ${as-path} ${med} ${next-hop}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="capability" help="Advertise capability to the peer"/>
  <COMMAND name="capability orf" help="Advertise capability to this neighbor"/>
  <COMMAND name="capability orf prefix-list" help="Advertise capability to this neighbor">
    <PARAM name="capopt" help="Capabilities" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="send" help="Capability to RECEIVE the ORF from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="receive" help="Capability to SEND the ORF to this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Capability to SEND and RECEIVE the ORF to/from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_capability_orf_config_orf_type ${vrf-name} ${template-name} L2VPN_EVPN ${capopt}</ACTION>
  </COMMAND>
  <COMMAND name="default-originate" help="Originate default route to this neighbor" ref="hidden">
    <PARAM name="route-map" help="Route-map to specify criteria to originate default" mode="subcommand" ptype="SUBCOMMAND" optional="true">
       <PARAM name="rtemap" help="Route-map name" ptype="STRING"/>
    </PARAM>
    <ACTION>
             if test -n "${route-map}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_send_default_route ${vrf-name} ${template-name} L2VPN_EVPN True&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_default_policy_name ${vrf-name} ${template-name} L2VPN_EVPN ${rtemap}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_send_default_route ${vrf-name} ${template-name} L2VPN_EVPN True&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="filter-list" help="Establish BGP filters">
    <PARAM name="fname" help="AS path access-list name" ptype="STRING">
      <PARAM name="filtopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> if test "${filtopt}" = "in" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_filter_list_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${fname}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_filter_list_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${fname}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="next-hop-self" help="Disable the next hop calculation for this neighbor">
    <PARAM name="force" help="Set the next hop to self for reflected routes" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_next_hop_self_config ${vrf-name} ${template-name} L2VPN_EVPN True ${force}&#xA;
             if test -z "${force}" ; then&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_next_hop_self_config_force ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             fi&#xA;
     </ACTION>
  </COMMAND>
  <COMMAND name="prefix-list" help="Filter updates to/from this neighbor">
    <PARAM name="pname" help="Name of a prefix list" ptype="STRING">
      <PARAM name="prfopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> if test "${prfopt}" = "in" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_prefix_list_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${pname}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_prefix_list_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${pname}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="remove-private-AS" help="Remove private ASNs in outbound updates">
    <PARAM name="all" help="Apply to all AS numbers" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <PARAM name="replace-AS" help="Replace private ASNs with our ASN in outbound updates" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_remove_private_as_config ${vrf-name} ${template-name} L2VPN_EVPN True ${all} ${replace-AS}&#xA;
             if test -z "${all}" ; then&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_remove_private_as_config_all ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             fi&#xA;
             if test -z "${replace-AS}" ; then&#xA;
                python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_remove_private_as_config_replace_as ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="route-reflector-client" help="Configure a neighbor as Route Reflector client">
   <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_route_reflector_client ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="route-server-client" help="Configure a neighbor as Route Server client">
   <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_route_server_client ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="send-community" help="Send Community attribute to this neighbor">
    <PARAM name="comtype" help="Send options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="standard" help="Send Standard Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="extended" help="Send Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Send Standard and Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="none" help="Do not send Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_send_community ${vrf-name} ${template-name} L2VPN_EVPN ${comtype}</ACTION>
  </COMMAND>
  <COMMAND name="soft-reconfiguration" help="Per neighbor soft reconfiguration">
    <PARAM name="inbound" help="Allow inbound soft reconfiguration for this neighbor" mode="subcommand" ptype="SUBCOMMAND">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_soft_reconfiguration_in ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="unsuppress-map" help="Route-map to selectively unsuppress suppressed routes">
    <PARAM name="map" help="Name of route map" ptype="STRING">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_unsuppress_map_name ${vrf-name} ${template-name} L2VPN_EVPN ${map}</ACTION>
  </COMMAND>
  <COMMAND name="weight" help="Set default weight for routes from this neighbor">
    <PARAM name="val" help="Default weight" ptype="RANGE_0_65535"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_weight ${vrf-name} ${template-name} L2VPN_EVPN ${val}</ACTION>
  </COMMAND>
  <COMMAND name="maximum-prefix" help="Maximum number of prefixes to accept from this peer">
    <PARAM name="max-prefix-val" help="Maximum no. of prefix limit" ptype="RANGE_1_4294967295">
      <PARAM name="threshold-val" help="Threshold value (%) at which to generate a warning msg" ptype="PERCENT_1" default="0" order="true" optional="true"/>
      <PARAM name="maxpfopt" help="Maximum limit options" mode="switch" ptype="SUBCOMMAND" order="true" optional="true">
        <PARAM name="warning-only" help="Only give warning message when limit is exceeded" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="restart" help="Restart bgp connection after limit is exceeded" mode="subcommand" ptype="SUBCOMMAND">
           <PARAM name="interval" help="Restart interval in minutes" ptype="RANGE_1_65535"/>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config ${vrf-name} ${template-name} L2VPN_EVPN ${max-prefix-val} ${threshold-val} ${maxpfopt} ${interval}&#xA;
             if test "${threshold-val}" = "0" ; then&#xA;
                  python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_warning_threshold_pct ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             fi&#xA;
             if test -z "${warning-only}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_prevent_teardown ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             fi&#xA;
             if test -z "${restart}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_restart_timer ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>

  <COMMAND name="no" help="no commands"/>
  <COMMAND name="no activate" help="Disable the Address Family for this Neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py patch_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN False</ACTION>
  </COMMAND>
  <COMMAND name="no allowas-in" help="Allow local AS number in as-path">
    <PARAM name="allowopt" help="" mode="switch" ptype="SUBCOMMAND" optional="true">
      <PARAM name="value" help="as-number" ptype="RANGE_1_10"/>
      <PARAM name="origin" help="Only accept my AS in the as-path if the route was originated in my AS" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${template-name} L2VPN_EVPN ${value}&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${template-name} L2VPN_EVPN False&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN False&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no route-map" help="Name of the route map (max 140 chars)">
    <PARAM name="route-name-str" help="route map name" ptype="STRING">
      <PARAM name="direction" help="direction" mode="switch" ptype="SUBCOMMAND" optional="true">
        <PARAM name="in" help="Filter incoming routing updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
        <PARAM name="out" help="Filter outgoing routing updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
      </PARAM>
    </PARAM>
    <ACTION>
          if test "${direction}" = "in" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          elif test "${direction}" = "out" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          else&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
               python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no addpath-tx-all-paths" help="Use addpath to advertise all paths to a neighbor">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_add_paths_config_tx_add_paths ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no addpath-tx-bestpath-per-AS" help="Use addpath to advertise the bestpath per each neighboring AS">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_add_paths_config_tx_add_paths ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no as-override" help="Override ASNs in outbound updates if aspath equals remote-as">
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_as_override ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no attribute-unchanged" help="BGP attribute is propagated unchanged to this neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_attribute_unchanged_config_as_path ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_attribute_unchanged_config_med ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_attribute_unchanged_config_next_hop ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no capability" help="Advertise capability to the peer"/>
  <COMMAND name="no capability orf" help="Advertise capability to this neighbor"/>
  <COMMAND name="no capability orf prefix-list" help="Advertise capability to this neighbor">
    <PARAM name="capopt" help="Capabilities" mode="switch" ptype="SUBCOMMAND" optional="true">
      <PARAM name="send" help="Capability to RECEIVE the ORF from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="receive" help="Capability to SEND the ORF to this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Capability to SEND and RECEIVE the ORF to/from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_capability_orf_config_orf_type ${vrf-name} ${template-name} L2VPN_EVPN ${capopt}</ACTION>
  </COMMAND>
  <COMMAND name="no default-originate" help="Originate default route to this neighbor" ref="hidden">
    <PARAM name="route-map" help="Route-map to specify criteria to originate default" mode="subcommand" ptype="SUBCOMMAND" optional="true">
       <PARAM name="rtemap" help="Route-map name" ptype="STRING"/>
    </PARAM>
    <ACTION>
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_send_default_route ${vrf-name} ${template-name} L2VPN_EVPN False&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_default_policy_name ${vrf-name} ${template-name} L2VPN_EVPN ${rtemap}&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no filter-list" help="Establish BGP filters">
    <PARAM name="fname" help="AS path access-list name" ptype="STRING">
      <PARAM name="filtopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> if test "${filtopt}" = "in" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_filter_list_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${fname}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_filter_list_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${fname}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no next-hop-self" help="Disable the next hop calculation for this neighbor">
    <PARAM name="force" help="Set the next hop to self for reflected routes" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_next_hop_self_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
              python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_next_hop_self_config_force ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
     </ACTION>
  </COMMAND>
  <COMMAND name="no prefix-list" help="Filter updates to/from this neighbor">
    <PARAM name="pname" help="Name of a prefix list" ptype="STRING">
      <PARAM name="prfopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> if test "${prfopt}" = "in" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_prefix_list_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${pname}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_prefix_list_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${pname}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no remove-private-AS" help="Remove private ASNs in outbound updates">
    <PARAM name="all" help="Apply to all AS numbers" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <PARAM name="replace-AS" help="Replace private ASNs with our ASN in outbound updates" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_remove_private_as_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_remove_private_as_config_all ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_remove_private_as_config_replace_as ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no route-reflector-client" help="Configure a neighbor as Route Reflector client">
   <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_route_reflector_client ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no route-server-client" help="Configure a neighbor as Route Server client">
   <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_route_server_client ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no send-community" help="Send Community attribute to this neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_send_community ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no soft-reconfiguration" help="Per neighbor soft reconfiguration">
    <PARAM name="inbound" help="Allow inbound soft reconfiguration for this neighbor" mode="subcommand" ptype="SUBCOMMAND">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_soft_reconfiguration_in ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no unsuppress-map" help="Route-map to selectively unsuppress suppressed routes">
    <PARAM name="map" help="Name of route map" ptype="STRING">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_unsuppress_map_name ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no weight" help="Set default weight for routes from this neighbor">
    <PARAM name="val" help="Default weight" ptype="RANGE_0_65535" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_weight ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no maximum-prefix" help="Maximum number of prefixes to accept from this peer">
    <PARAM name="max-prefix-val" help="Maximum no. of prefix limit" ptype="RANGE_1_4294967295" optional="true">
      <PARAM name="mxopt" help="Maximum limit options" mode="switch" ptype="SUBCOMMAND" optional="true">
        <PARAM name="threshold-val" help="Threshold value (%) at which to generate a warning msg" mode="subcommand" ptype="PERCENT_1"/>
        <PARAM name="warning-only" help="Only give warning message when limit is exceeded" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="restart" help="Restart bgp connection after limit is exceeded" mode="subcommand" ptype="SUBCOMMAND">
           <PARAM name="val" help="tbd" ptype="RANGE_1_255"/>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_max_prefixes ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_warning_threshold_pct ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_prevent_teardown ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
             python $SONIC_CLI_ROOT/sonic_cli_bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config_restart_timer ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>
</VIEW>

<VIEW name="enable-view">
  <COMMAND name="show bgp l2vpn" help="Layer 2 Virtual Private Network"/>
  <COMMAND name="show bgp l2vpn evpn" help="Ethernet Virtual Private Network">
    <ACTION builtin="clish_nop"/>
  </COMMAND>
  <COMMAND name="show bgp l2vpn evpn route" help="EVPN Route information">
    <PARAM name="evpnroutesubcommands" help="EVPN Route Subcommands" ptype="SUBCOMMAND" mode="switch" optional="true">
      <PARAM name="rd" help="Route Distinguisher" mode="subcommand" ptype="SUBCOMMAND" optional="true">
        <PARAM name="rdvalue" help="Route Distinguisher" ptype="RD">
          <PARAM name="evpnrouterdsubcommands" help="EVPN Route RD Subcommands" ptype="SUBCOMMAND" mode="switch" optional="true">
            <PARAM name="mac" help="MAC" mode="subcommand" ptype="SUBCOMMAND" optional="true">
              <PARAM name="macvalue" help="MAC" ptype="MAC_ADDR">
                <PARAM name="ip" help="IP" mode="subcommand" ptype="SUBCOMMAND">
                  <PARAM name="ipvalue" help="IP" ptype="IPV4V6_ADDR">
                  </PARAM>
                </PARAM>
              </PARAM>
            </PARAM>
            <PARAM name="type" help="Specify Route Type" mode="subcommand" ptype="SUBCOMMAND" optional="true">
              <PARAM name="types" help="EVPN route type subcommands" ptype="SUBCOMMAND" mode="switch">
                <MACRO name="BGP_EVPN_RT_TYPES" arg=""></MACRO>
              </PARAM>
            </PARAM>
          </PARAM>
        </PARAM>
      </PARAM>
    </PARAM>
    <!--ACTION> python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes show_evpn_routes.j2 default L2VPN_EVPN</ACTION-->
    <ACTION>
        if test -n "${rd}"; then&#xA;
          if test -n "${ead}"; then&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=rd,type ${rdvalue} 1&#xA;
          elif test -n "${es}"; then&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=rd,type ${rdvalue} 4&#xA;
          elif test -n "${macip}"; then&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=rd,type ${rdvalue} 2&#xA;
          elif test -n "${multicast}"; then&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=rd,type ${rdvalue} 3&#xA;
          elif test -n "${prefix}"; then&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=rd,type ${rdvalue} 5&#xA;
          elif test -n "${macvalue}"; then&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=rd,macip ${rdvalue} ${macvalue} ${ipvalue}&#xA;
          else&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=rd ${rdvalue}&#xA;
          fi&#xA;  
        else&#xA;
          python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes show_evpn_routes.j2 default L2VPN_EVPN&#xA;
        fi&#xA;      
  </ACTION>
  </COMMAND>
  <COMMAND name="show bgp l2vpn evpn route detail" help="Display Detailed Information">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes show_evpn_routes_detail.j2 default L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="show bgp l2vpn evpn summary" help="Summary of BGP neighbor status">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py get_ip_bgp_summary show_evpn_summary.j2 default</ACTION>
  </COMMAND>
  <COMMAND name="show bgp l2vpn evpn route type" help="Specify Route type">
    <PARAM name="type" help="EVPN route type subcommands" ptype="SUBCOMMAND" mode="switch">
      <MACRO name="BGP_EVPN_RT_TYPES" arg=""></MACRO>
    </PARAM>
    <ACTION>
        if test -n "${ead}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes.j2 default L2VPN_EVPN filter=type 1&#xA;
        elif test -n "${es}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes.j2 default L2VPN_EVPN filter=type 4&#xA;
        elif test -n "${macip}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes.j2 default L2VPN_EVPN filter=type 2&#xA;
        elif test -n "${multicast}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes.j2 default L2VPN_EVPN filter=type 3&#xA;
        elif test -n "${prefix}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes.j2 default L2VPN_EVPN filter=type 5&#xA;
        else&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes show_evpn_routes.j2 default L2VPN_EVPN&#xA;
        fi&#xA;
  </ACTION>
  </COMMAND>
  <COMMAND name="show bgp l2vpn evpn route detail type" help="Specify Route type">
    <PARAM name="type" help="EVPN route type subcommands" ptype="SUBCOMMAND" mode="switch">
      <MACRO name="BGP_EVPN_RT_TYPES" arg=""></MACRO>
    </PARAM>
    <ACTION>
        if test -n "${ead}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=type 1&#xA;
        elif test -n "${es}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=type 4&#xA;
        elif test -n "${macip}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=type 2&#xA;
        elif test -n "${multicast}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=type 3&#xA;
        elif test -n "${prefix}"; then&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes_filter show_evpn_routes_detail.j2 default L2VPN_EVPN filter=type 5&#xA;
        else&#xA;
           python $SONIC_CLI_ROOT/sonic-cli-show-bgp-evpn.py get_bgp_evpn_routes show_evpn_routes_detail.j2 default L2VPN_EVPN&#xA;
        fi&#xA;
  </ACTION>
  </COMMAND>

  <COMMAND name="clear bgp l2vpn" help="Address family"/>
  <COMMAND name="clear bgp l2vpn evpn" help="Address family modifier">
    <PARAM name="clear_bgp_subcommands" help="BGP Subcommands" ptype="SUBCOMMAND" mode="switch">
        <MACRO name="CLEAR_EVPN_BGP_OPTIONS_SUB_CMDS" arg=""></MACRO>
    </PARAM>
    <ACTION builtin="clish_pyobj">sonic_cli_clear_bgp clear_bgp asn=${as-num-dot} n-ipv4=${neighbor-ipv4} n-ipv6=${neighbor-ipv6} ${__full_line}</ACTION>
  </COMMAND>
</VIEW>

</CLISH_MODULE>

